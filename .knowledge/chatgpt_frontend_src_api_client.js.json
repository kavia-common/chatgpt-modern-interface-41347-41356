{"is_source_file": true, "format": "JavaScript", "description": "This is a source code file implementing an API client wrapper in JavaScript. It provides functions to perform fetch-based GET and POST requests with environment-driven configuration, error handling, mock fallback, and health probing.", "external_files": ["../config/env", "./mock"], "external_methods": ["ENV", "MockApi.isEnabled", "MockApi.get", "MockApi.post"], "published": ["apiGet", "apiPost", "apiPostStream"], "classes": [], "methods": [{"name": "safeParseJSON(str)", "description": "Parses a JSON string safely, returning null on failure.", "scope": "", "scopeKind": ""}, {"name": "buildUrl(path)", "description": "Builds a full URL from a relative path or uses an absolute URL if provided.", "scope": "", "scopeKind": ""}, {"name": "doFetch(url, options = {}, timeoutMs = 30000)", "description": "Performs a fetch with timeout, handling JSON and text responses, and error conditions.", "scope": "", "scopeKind": ""}, {"name": "probeHealth(timeoutMs = 3000)", "description": "Checks if the API base is reachable by testing /health endpoint or a HEAD request.", "scope": "", "scopeKind": ""}, {"name": "shouldUseMock()", "description": "Determines whether to use mock API based on feature flag and health probe.", "scope": "", "scopeKind": ""}, {"name": "apiGet(path, options = {})", "description": "Performs a GET request with mock fallback if enabled or available.", "scope": "", "scopeKind": ""}, {"name": "apiPost(path, body = {}, options = {})", "description": "Performs a POST request with mock fallback on network failure.", "scope": "", "scopeKind": ""}, {"name": "apiPostStream(path, body = {}, options = {})", "description": "Placeholder for streaming POST requests, currently identical to apiPost.", "scope": "", "scopeKind": ""}], "calls": ["buildUrl", "doFetch", "safeParseJSON", "probeHealth", "MockApi.isEnabled", "MockApi.get", "MockApi.post", "fetch"], "search-terms": ["API wrapper", "fetch with timeout", "mock fallback", "/health endpoint", "environment driven URL", "json parse", "health probe"], "state": 2, "file_id": 19, "knowledge_revision": 50, "git_revision": "e5be6596fbda0afa8397fb27700206b665643d15", "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^  'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "DEFAULT_HEADERS", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_HEADERS", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^const DEFAULT_HEADERS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "apiGet", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^export async function apiGet(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "apiPost", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^export async function apiPost(path, body = {}, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body = {}, options = {})"}, {"_type": "tag", "name": "apiPostStream", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^export async function apiPostStream(path, body = {}, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body = {}, options = {})"}, {"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^function buildUrl(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}, {"_type": "tag", "name": "doFetch", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^async function doFetch(url, options = {}, timeoutMs = 30000) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {}, timeoutMs = 30000)"}, {"_type": "tag", "name": "probeHealth", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^async function probeHealth(timeoutMs = 3000) {$/", "language": "JavaScript", "kind": "function", "signature": "(timeoutMs = 3000)"}, {"_type": "tag", "name": "safeParseJSON", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^function safeParseJSON(str) {$/", "language": "JavaScript", "kind": "function", "signature": "(str)"}, {"_type": "tag", "name": "shouldUseMock", "path": "/home/kavia/workspace/code-generation/chatgpt-modern-interface-41347-41356/chatgpt_frontend/src/api/client.js", "pattern": "/^async function shouldUseMock() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "bcb42fff18b65772a5139d584642e9c2", "format-version": 4, "code-base-name": "chatgpt_frontend", "filename": "chatgpt_frontend/src/api/client.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "DEFAULT_HEADERS", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"50": "e5be6596fbda0afa8397fb27700206b665643d15"}]}